(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{9178:function(e,t,a){Promise.resolve().then(a.bind(a,2529))},2529:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var s=a(7437),n=a(5587),r=a(2265);function i(){let{items:e,total:t,clear:a}=(0,n.j)(),[i,l]=(0,r.useState)(""),[o,d]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"container-max pt-40 my-10 px-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Validation de commande"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("form",{onSubmit:function(s){s.preventDefault(),d(!0),l("");let n=Object.fromEntries(new FormData(s.currentTarget));if(0===e.length){l("Votre panier est vide."),d(!1);return}let r=encodeURIComponent(function(e,t,a){let s=[];return s.push("\uD83D\uDED2 NOUVELLE COMMANDE BIORICH"),s.push("Nom: ".concat(e.firstName||""," ").concat(e.lastName||"")),s.push("T\xe9l\xe9phone: ".concat(e.phone||"")),s.push("Email: ".concat(e.email||"")),e.notes&&s.push("Notes: ".concat(e.notes)),s.push(""),s.push("Produits:"),t.forEach(e=>{s.push("- ".concat(e.name," \xd7").concat(e.qty," = ").concat((e.price*e.qty).toFixed(0)," FCFA"))}),s.push(""),s.push("Total: ".concat(a.toFixed(0)," FCFA")),s.join("\n")}(n,e,t)),i="https://wa.me/".concat("22997178417","?text=").concat(r);window.open(i,"_blank"),a(),d(!1),l("Commande envoy\xe9e via WhatsApp ✅")},className:"card p-6 space-y-3 bg-white rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,s.jsx)("input",{name:"firstName",required:!0,placeholder:"Nom",className:"border rounded-lg px-3 py-2"}),(0,s.jsx)("input",{name:"lastName",required:!0,placeholder:"Pr\xe9nom",className:"border rounded-lg px-3 py-2"})]}),(0,s.jsx)("input",{name:"phone",required:!0,placeholder:"T\xe9l\xe9phone",className:"border rounded-lg px-3 py-2"}),(0,s.jsx)("input",{name:"email",type:"email",required:!0,placeholder:"Email",className:"border rounded-lg px-3 py-2"}),(0,s.jsx)("textarea",{name:"notes",placeholder:"Adresse ou notes (optionnel)",className:"border rounded-lg px-3 py-2 w-full"}),(0,s.jsx)("button",{disabled:o,className:"btn-primary w-full py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700",children:o?"Envoi...":"Valider ma commande"}),i&&(0,s.jsx)("p",{className:"text-sm mt-2",children:i})]}),(0,s.jsxs)("aside",{className:"card p-6 bg-white rounded-lg shadow",children:[(0,s.jsx)("h3",{className:"font-semibold mb-3",children:"R\xe9capitulatif"}),(0,s.jsxs)("ul",{className:"space-y-2",children:[0===e.length&&(0,s.jsx)("li",{className:"text-sm text-gray-500",children:"Votre panier est vide."}),e.map(e=>(0,s.jsxs)("li",{className:"flex justify-between text-sm",children:[(0,s.jsxs)("span",{children:[e.name," \xd7 ",e.qty]}),(0,s.jsxs)("span",{children:[(e.price*e.qty).toFixed(0)," FCFA"]})]},e.id))]}),(0,s.jsxs)("div",{className:"mt-4 flex justify-between font-semibold",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{children:[t.toFixed(0)," FCFA"]})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:"\xc0 la validation, WhatsApp s’ouvrira automatiquement pour envoyer les d\xe9tails de votre commande."})]})]})]})}},5587:function(e,t,a){"use strict";a.d(t,{CartProvider:function(){return i},j:function(){return l}});var s=a(7437),n=a(2265);let r=(0,n.createContext)();function i(e){let{children:t}=e,[a,i]=(0,n.useState)([]),[l,o]=(0,n.useState)(!1),d=(0,n.useMemo)(()=>a.reduce((e,t)=>e+t.price*t.qty,0),[a]);return(0,s.jsx)(r.Provider,{value:{items:a,add:e=>{i(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,qty:t.qty+1}:t):[...t,{...e,qty:1}]),o(!0)},remove:e=>i(t=>t.filter(t=>t.id!==e)),change:(e,t)=>i(a=>a.map(a=>a.id===e?{...a,qty:Math.max(1,t)}:a)),clear:()=>i([]),total:d,isOpen:l,openDrawer:()=>o(!0),closeDrawer:()=>o(!1)},children:t})}let l=()=>(0,n.useContext)(r)}},function(e){e.O(0,[971,23,744],function(){return e(e.s=9178)}),_N_E=e.O()}]);